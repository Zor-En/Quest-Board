const express=require("express"),apiRouter=require("./routes/api"),session=require("express-session"),pool=require("./models/QuestBoardModels"),PostgresSession=require("connect-pg-simple")(session),path=require("path"),PORT=3e3,app=express();app.use(express.json()),app.use(express.urlencoded({extended:!0})),app.use(express.static(path.join(__dirname,"..","build"))),app.use(session({store:new PostgresSession({pool,tableName:"sessions"}),secret:"thishelpsencodesthecookie",cookie:{maxAge:3e6},resave:!1,saveUninitialized:!0})),app.use("/",apiRouter),app.use(((e,s,o,r)=>{const p=Object.assign({},{log:"Express error handler caught unknown middleware error",status:500,message:{err:"An error occurred"}},e);return console.log(p.log),o.status(p.status).json(p.message)})),app.listen(3e3,(()=>{console.log("Listening on Port: 3000")}));